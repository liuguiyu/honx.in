<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link href="https://chrome.google.com/webstore/detail/heehjpdocpefckjobfgnfdbhoebhphkf" rel="chrome-webstore-item">
    <title>Hello！红杏</title>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="./css/reveal.min.css">
    <link rel="stylesheet" href="./css/default.css" id="theme">
    <link rel="stylesheet" href="./css/my.css">
    <link rel="stylesheet" href="./css/jquery.remodal.css">
    <link rel="stylesheet" href="./css/animate.min.css">
    <!--[if lt IE 9]>
		<script src="./js/html5shiv.js"></script>
		<![endif]-->
</head>
<body>
<div class="reveal remodal-bg">
    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
        <section data-background="#BF4A40">
            <h1>Hello!</h1>
            <h2>来认识一下红杏吧</h2>
            <p>
                <br>
                请按 “右方向键（→）” 继续
                <br>
                <br>
                <small>你也可以<a href="#/install">直接进入安装页面</a></small>
            </p>
        </section>
        <section data-background="#BF4A40">
            <h2>众所周知…</h2>
            <p>
                天朝的网络是有点奇葩的。<br>
                <br>
                <small>（按右继续）</small>
            </p>
        </section>
        <section data-background="#BF4A40">
            <ul>
                <li>facebook.com</li>
                <li class="fragment">twitter.com</li>
                <li class="fragment">youtube.com</li>
            </ul>
            <p class="fragment"><br>在天朝，上面这些网站都是不存在的</p>
            <p class="fragment">（虽然新闻联播说有）</p>
            <small>（按右）</small>
        </section>
        <section data-background="#BF4A40">
            <h3>尽管新闻联播里说的不一定是真的，</h3>
            <h3>但这次的确是真的</h3>
            <p class="fragment"><br>外国网站的访问不畅，使得…</p>
            <ul class="fragment">
                <li>程序员、外贸从业者、学者们的工作很难开展</li>
                <li>和朋友们的交流被迫中断</li>
                <li>看个视频也只能看转到国内的二手货</li>
            </ul>
        </section>
        <section data-background="#23719F">
            <h2>于是就诞生了红杏…</h2>
        </section>
        <section data-background="#23719F">
            <h2>她可以让这种页面</h2>
            <img src="./img/facebook-ban.png" alt="Meny">
        </section>
        <section data-background="#23719F">
            <h2>变成这种页面</h2>
            <img src="./img/facebook.png" alt="Meny">
            <p>（可以左右多切换几次 ^_^）</p>
        </section>
        <section data-background="#23719F">
            <h2>或许你会说，你已经掌握了一种魔法来实现这个效果</h2>
        </section>
        <section data-background="#23719F">
            <h2>但红杏不一样的地方在于…</h2>
            <br>
            <ol>
                <li>
                    不需要繁琐的配置<br>
                    <small>（GoAgent，我在说你呢）</small>
                </li>
                <li>
                    不需要频繁拨号、断开<br>
                    <small>（VPN该脸红了）</small>
                </li>
                <li>
                    ta只在需要的时候，默默地发挥作用<br>
                    <small>不会拖慢普通网站的访问速度</small>
                </li>
            </ol>
        </section>
        <section data-background="#5A966E">
            <h3>山穷水复疑无路，一枝红杏出墙来</h3>
            <h2>想试试吗？</h2>
        </section>
        <section id="install" data-background="#5A966E">
            <section>
                <a href="" class="auto-install button">
                    <span class="before">点击开始安装红杏</span>
                    <span class="doing">正在安装…</span>
                    <span class="success">安装成功</span>
                </a>
                <p class="manual-hint">
                    <br>
                    如果无法自动安装，请看 <a href="javascript:Reveal.down();">如何手动安装</a>
                    <br>
                    <small>（按方向键“下”）</small>
                </p>
            </section>
            <section>
                <h2>1、下载离线安装包</h2>
                <br><a href="./crx/hongxing.crx" class="manual-install button">点击下载</a>
                <br><br><small>（完成后继续按“下”）</small>
            </section>
            <section>
                <h2>2、打开浏览器插件列表</h2>
                <img src="./img/menu.png" alt="Meny">
                <br><br><small>（完成后继续按“下”）</small>
            </section>
            <section>
                <h2>3、把离线安装包拖入页面</h2>
                <img src="./img/install.png" alt="Meny">
                <br><small>Mac用户可能需要先拖到桌面，再拖回列表</small>
                <br><br><small>（完成后继续按“下”）</small>
            </section>
            <section>
                <h2>大功告成</h2>
                <p>由于是官方安装包，所以自带自动升级功能</p>
            </section>
        </section>
    </div>
</div>
<div class="remodal" data-remodal-id="modal">
    <h1>浏览器警告</h1>
    <p>
        对不起，红杏插件只能安装在chrome内核浏览器中，请用chrome重新打开本链接。
    </p>
    <br>
</div>
<script src="//lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.min.js"></script>
<script src="./js/head.min.js"></script>
<script src="./js/reveal.min.js"></script>
<script src="./js/jquery.remodal.min.js"></script>
<script>
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        autoSlide: 5000,
        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
        dependencies: [
            { src: './js/classList.js', condition: function () {
                return !document.body.classList;
            } },
            { src: './js/zoom.js', async: true, condition: function () {
                return !!document.body.classList;
            } }
        ]
    });
    Reveal.addEventListener('slidechanged', function(event) {
    });
    $(function () {
        var $autoInstall = $('.auto-install.button');
        var failTimeout = null;
        window.callback = function(){};
		//https://ddparis.com/user/attach_inviter?code=U6jPhYKo13KNSTtv
        $.getScript("./js/attach_inviter.js");
        if (navigator.userAgent.toLowerCase().indexOf('chrome') < 0) {
            $.remodal.lookup[$('[data-remodal-id=modal]').data('remodal')].open();
        } else {
        }
        $autoInstall.click(function (e) {
            e.preventDefault();
            var url = "https://chrome.google.com/webstore/detail/heehjpdocpefckjobfgnfdbhoebhphkf";
            var onSuccess = function () {
                $autoInstall.attr('class', 'auto-install button success');
                if (failTimeout) {
                    clearTimeout(failTimeout);
                    failTimeout = null
                }
            };
            var onError = function (e) {
                console.error(e);
                $autoInstall.attr('class', 'auto-install button');
                if (e == "User cancelled install") {
                }
                else {
                    alert('安装失败，请尝试手动安装');
                    Reveal.down();
                }
                if (failTimeout) {
                    clearTimeout(failTimeout);
                    failTimeout = null
                }
            };
            try {
                if (chrome.app.isInstalled) {
                    console.log('installed');
                } else {
                    $autoInstall.attr('class', 'auto-install button doing');
                    chrome.webstore.install(url, onSuccess, onError);
                    failTimeout = setTimeout(function () {
                        console.log('install timeout');
                        $('.manual-hint').attr('class', 'animated tada')
                    }, 10 * 1000)
                }
            } catch (e) {
                onError(e)
            }
        });
    });
</script>
</body>
</html>